module Chat
  class ChannelName
    MAPPING = Hash.new("Unknown chat").merge({
      Chat::Type.coach => "Coach chat",
      Chat::Type.member_support => "MS chat",
      Chat::Type.care_guide => "Care Guide chat",
      Chat::Type.therapist => "Therapist chat",
      Chat::Type.prescriber => "Prescriber chat"
    })

    def initialize(sendbird_chat_channel, sendbird_user)
      @sendbird_chat_channel = sendbird_chat_channel
      @sendbird_user = sendbird_user
    end

    def short
      "#{MAPPING[@sendbird_chat_channel.chat_type]}#{" (view only)" if @sendbird_user.spectator?}"
    end

    alias_method :to_s, :short
  end
end
