# frozen_string_literal: true

module Staffers
  module Accounts
    class AccountLinksComponent < ViewComponent::Base
      attr_reader :staffer, :account, :member

      def initialize(staffer:, account:, member:)
        @staffer = staffer
        @account = account
        @member = member
      end

      def chat_channels
        @_chat_channels ||= Chat::AccessibleStafferChannel
          .for(account:, staffer:, member:)
          .map do |channel|
          {
            channel:,
            tooltip: Chat::ChannelLastMessage.for(accessible_staffer_channel: channel),
            path: channel.path
          }
        end
      end
    end
  end
end
